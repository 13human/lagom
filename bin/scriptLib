#!/usr/bin/env bash

# Copyright (C) 2009-2019 Lightbend Inc. <https://www.lightbend.com>

# Lib for CI scripts

set -e
set -o pipefail

# Travis uses a detached HEAD during builds
# CURRENT_BRANCH is used when updating Whitesource to determine the correct project name
export CURRENT_BRANCH=${TRAVIS_BRANCH}

EXTRA_OPTS="-Dakka.test.timefactor=10"

runSbt() {
  sbt ${EXTRA_OPTS} --warn -jvm-opts .travis-jvmopts 'set concurrentRestrictions in Global += Tags.limitAll(1)' "$@"
}

runSbtNoisy() {
  sbt ${EXTRA_OPTS} -jvm-opts .travis-jvmopts 'set concurrentRestrictions in Global += Tags.limitAll(1)' "$@"
}


printMessage() {
  echo "[info]"
  echo "[info] ---- $1"
  echo "[info]"
}
